language: python
python:
- '3.4'
env:
  matrix:
    - FORMAT=hst TF=M1
    - FORMAT=hst TF=M2
    - FORMAT=hst TF=M3
    - FORMAT=hst TF=M4
    - FORMAT=hst TF=M5
    - FORMAT=hst TF=M6
    - FORMAT=hst TF=M10
    - FORMAT=hst TF=M12
    - FORMAT=hst TF=M15
    - FORMAT=hst TF=M20
    - FORMAT=hst TF=M30
    - FORMAT=hst TF=H1
    - FORMAT=hst TF=H2
    - FORMAT=hst TF=H3
    - FORMAT=hst TF=H4
    - FORMAT=hst TF=H6
    - FORMAT=hst TF=H8
    - FORMAT=hst TF=H12
    - FORMAT=hst TF=D1
    - FORMAT=hst TF=W1
    - FORMAT=hst TF=MN1
    - FORMAT=fxt TF=M1
    - FORMAT=fxt TF=M5
    - FORMAT=fxt TF=M15
    - FORMAT=fxt TF=M30
    - FORMAT=fxt TF=H1
    - FORMAT=fxt TF=H4
    - FORMAT=fxt TF=D1
    - FORMAT=fxt TF=W1
    - FORMAT=fxt TF=MN1
addons:
  apt:
    packages:
    - realpath
    - pv
notifications:
  email: false
before_install:
- set -e
install: 
before_script:
- curl -o Makefile https://raw.githubusercontent.com/FX-Data/FX-Data-Test/master/Makefile
script:
- make $FORMAT
after_success: 
after_failure:
- sudo apt-get -qy install tree && tree -d -L 6
- env
after_script:
- pwd
deploy:
  provider: releases
  api_key:
    secure: "HCfHhHkchgyvJZTfY8rMPXMqTrRyUORZaWvuBuWzQbkP5hR0tTqxPNprRbglWbzE/ihudDa4a7LAu3WKHB/HYpEqL5hquwzKtcBhY0PTWcBP5WSujgd/2MrjVj/4eLt73jMcLqTg4A5RTgdwsYbuzT5cb6ek/CfQhbJA9Y9VCr3njkBf5ywrhCxbnRHEyuUzZo6x5o0Sl1XJ9YduR3x5fnpBAkA9JCD+IxoXKoU45/k8oi1G0jJd69Eie+SGhwe8cE49igAxfqQhUEV1O6nt6i14m1GRFdVbEW+Ta1DdNqhPTWZMmrYlk8vmVst2UelOMa926MMN9ZG+sYb7PAv65IO8X6/6UNY2m9AFaK0cuZKHhotaPu0cUtJQxJrERqTBat+V/3Mq4LubJDzVJg1Pxgi+SfI4hvofOCT0e3J5Scl/OjZOtod6pZaXsWWDU3kFmeA9JKoT3bO7oluzSbzuqR436mt6b4BKKEYT62R3KplwbDuCyVhKJ8gjkBaqJml29Au8Eyd2x47SklThnz2WkmpaXK2Drt11abJXkWKim1wW5SYx0HvgpTtPB85r76eqSz7Lq9Rau629KWeofuSL1eVk5lR3uCbTMSokmYAJDFLw2udsACDZr3K+yjC/v9+ydfa23XPuO+i+hXhGy3Wn0cOc+1CpN8bWRIhypPYtW7M="
  file:
    - "*.hst.gz"
    - "*.fxt.gz"
  file_glob: true
  skip_cleanup: true
  overwrite: true
  on:
    repo: FX-Data/FX-Data-EURAUD-DS
    tags: true
after_deploy:
- make clean
